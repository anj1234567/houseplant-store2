<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Houseplant Store</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/redux@4.2.1/dist/redux.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-redux@8.1.3/dist/react-redux.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.23.2/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;
    const { createStore } = Redux;
    const { Provider, useSelector, useDispatch } = ReactRedux;

    // Redux setup
    const initialState = {
      cart: [],
      plants: [
        { id: 1, name: "Monstera", price: 25, category: "Foliage", thumbnail: "https://via.placeholder.com/100?text=Monstera" },
        { id: 2, name: "Fiddle Leaf Fig", price: 30, category: "Foliage", thumbnail: "https://via.placeholder.com/100?text=Fiddle+Leaf" },
        { id: 3, name: "Snake Plant", price: 15, category: "Low Light", thumbnail: "https://via.placeholder.com/100?text=Snake+Plant" },
        { id: 4, name: "Pothos", price: 10, category: "Low Light", thumbnail: "https://via.placeholder.com/100?text=Pothos" },
        { id: 5, name: "Orchid", price: 20, category: "Flowering", thumbnail: "https://via.placeholder.com/100?text=Orchid" },
        { id: 6, name: "Peace Lily", price: 18, category: "Flowering", thumbnail: "https://via.placeholder.com/100?text=Peace+Lily" }
      ]
    };

    const cartReducer = (state = initialState, action) => {
      switch (action.type) {
        case 'ADD_TO_CART':
          const existing = state.cart.find(item => item.id === action.payload.id);
          if (existing) {
            return {
              ...state,
              cart: state.cart.map(item =>
                item.id === action.payload.id
                  ? { ...item, quantity: item.quantity + 1 }
                  : item
              )
            };
          }
          return {
            ...state,
            cart: [...state.cart, { ...action.payload, quantity: 1 }]
          };
        case 'INCREMENT_QUANTITY':
          return {
            ...state,
            cart: state.cart.map(item =>
              item.id === action.payload ? { ...item, quantity: item.quantity + 1 } : item
            )
          };
        case 'DECREMENT_QUANTITY':
          return {
            ...state,
            cart: state.cart.map(item =>
              item.id === action.payload && item.quantity > 1
                ? { ...item, quantity: item.quantity - 1 }
                : item
            )
          };
        case 'REMOVE_FROM_CART':
          return {
            ...state,
            cart: state.cart.filter(item => item.id !== action.payload)
          };
        default:
          return state;
      }
    };

    const store = createStore(cartReducer);

    // Header Component
    const Header = ({ setPage }) => {
      const cart = useSelector(state => state.cart);
      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

      return (
        <header className="bg-green-600 text-white p-4 flex justify-between items-center">
          <button onClick={() => setPage('landing')} className="text-xl font-bold">Houseplant Store</button>
          <nav>
            <button onClick={() => setPage('products')} className="mr-4">Products</button>
            <button onClick={() => setPage('cart')} className="flex items-center">
              <svg className="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
              <span>{totalItems}</span>
            </button>
          </nav>
        </header>
      );
    };

    // Landing Page Component
    const LandingPage = ({ setPage }) => {
      return (
        <div className="min-h-screen bg-cover bg-center" style={{ backgroundImage: "url('https://via.placeholder.com/1920x1080?text=Plants')" }}>
          <div className="text-center pt-20">
            <h1 className="text-4xl font-bold text-green-800 mb-4">Houseplant Store</h1>
            <p className="text-lg text-gray-700 max-w-2xl mx-auto mb-6">
              Welcome to Houseplant Store, your one-stop shop for beautiful and healthy houseplants. We offer a variety of plants to bring life and greenery to your home.
            </p>
            <button onClick={() => setPage('products')} className="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">
              Get Started
            </button>
          </div>
        </div>
      );
    };

    // Product Listing Page Component
    const ProductListingPage = () => {
      const plants = useSelector(state => state.plants);
      const cart = useSelector(state => state.cart);
      const dispatch = useDispatch();
      const categories = [...new Set(plants.map(plant => plant.category))];

      return (
        <div className="p-4">
          <h2 className="text-2xl font-bold mb-4">Our Plants</h2>
          {categories.map(category => (
            <div key={category} className="mb-6">
              <h3 className="text-xl font-semibold mb-2">{category}</h3>
              <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                {plants
                  .filter(plant => plant.category === category)
                  .map(plant => {
                    const isInCart = cart.some(item => item.id === plant.id);
                    return (
                      <div key={plant.id} className="border p-4 rounded-lg">
                        <img src={plant.thumbnail} alt={plant.name} className="w-full h-24 object-cover mb-2" />
                        <h4 className="text-lg font-semibold">{plant.name}</h4>
                        <p>${plant.price}</p>
                        <button
                          onClick={() => dispatch({ type: 'ADD_TO_CART', payload: plant })}
                          disabled={isInCart}
                          className={`mt-2 px-4 py-2 rounded-lg ${isInCart ? 'bg-gray-400 cursor-not-allowed' : 'bg-green-600 text-white hover:bg-green-700'}`}
                        >
                          Add to Cart
                        </button>
                      </div>
                    );
                  })}
              </div>
            </div>
          ))}
        </div>
      );
    };

    // Shopping Cart Page Component
    const ShoppingCartPage = ({ setPage }) => {
      const cart = useSelector(state => state.cart);
      const dispatch = useDispatch();

      const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
      const totalCost = cart.reduce((sum, item) => sum + item.quantity * item.price, 0);

      return (
        <div className="p-4">
          <h2 className="text-2xl font-bold mb-4">Shopping Cart</h2>
          <p>Total Items: {totalItems}</p>
          <p>Total Cost: ${totalCost.toFixed(2)}</p>
          {cart.length === 0 ? (
            <p>Your cart is empty.</p>
          ) : (
            <div className="space-y-4">
              {cart.map(item => (
                <div key={item.id} className="flex items-center border p-4 rounded-lg">
                  <img src={item.thumbnail} alt={item.name} className="w-16 h-16 object-cover mr-4" />
                  <div className="flex-1">
                    <h4 className="text-lg font-semibold">{item.name}</h4>
                    <p>Unit Price: ${item.price}</p>
                    <p>Quantity: {item.quantity}</p>
                  </div>
                  <div className="flex space-x-2">
                    <button
                      onClick={() => dispatch({ type: 'INCREMENT_QUANTITY', payload: item.id })}
                      className="bg-green-600 text-white px-2 py-1 rounded"
                    >
                      +
                    </button>
                    <button
                      onClick={() => dispatch({ type: 'DECREMENT_QUANTITY', payload: item.id })}
                      className="bg-yellow-600 text-white px-2 py-1 rounded"
                    >
                      -
                    </button>
                    <button
                      onClick={() => dispatch({ type: 'REMOVE_FROM_CART', payload: item.id })}
                      className="bg-red-600 text-white px-2 py-1 rounded"
                    >
                      Delete
                    </button>
                  </div>
                </div>
              ))}
            </div>
          )}
          <div className="mt-4 space-x-4">
            <button
              onClick={() => alert('Coming Soon')}
              className="bg-blue-600 text-white px-4 py-2 rounded"
            >
              Checkout
            </button>
            <button
              onClick={() => setPage('products')}
              className="bg-green-600 text-white px-4 py-2 rounded"
            >
              Continue Shopping
            </button>
          </div>
        </div>
      );
    };

    // App Component
    const App = () => {
      const [page, setPage] = useState('landing');

      return (
        <Provider store={store}>
          {page !== 'landing' && <Header setPage={setPage} />}
          {page === 'landing' && <LandingPage setPage={setPage} />}
          {page === 'products' && <ProductListingPage />}
          {page === 'cart' && <ShoppingCartPage setPage={setPage} />}
        </Provider>
      );
    };

    // Render App
    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>